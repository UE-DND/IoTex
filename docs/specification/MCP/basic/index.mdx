---
title: 概述
---

<div id="enable-section-numbers" />

<Info>**协议版本**: 2025-06-18</Info>

模型上下文协议由几个协同工作的关键组件组成：

- **基础协议**: 核心JSON-RPC消息类型
- **生命周期管理**: 连接初始化、能力协商和
  会话控制
- **授权**: 基于HTTP传输的身份验证和授权框架
- **服务器功能**: 服务器暴露的资源、提示和工具
- **客户端功能**: 客户端提供的采样和根目录列表
- **实用工具**: 诸如日志记录和参数补全等横切关注点

所有实现都**必须**支持基础协议和生命周期管理
组件。其他组件**可以**根据应用程序的特定需求来实现。

这些协议层建立了清晰的关注点分离，同时实现了客户端和服务器之间的丰富
交互。模块化设计允许实现支持
它们所需的确切功能。

## 消息

MCP客户端和服务器之间的所有消息都**必须**遵循
[JSON-RPC 2.0](https://www.jsonrpc.org/specification)规范。协议定义了
以下类型的消息：

### 请求

请求从客户端发送到服务器或反之，用于启动操作。

```typescript
{
  jsonrpc: "2.0";
  id: string | number;
  method: string;
  params?: {
    [key: string]: unknown;
  };
}
```

- 请求**必须**包含字符串或整数ID。
- 与基础JSON-RPC不同，ID**禁止**为`null`。
- 请求ID**禁止**在同一会话中被请求者之前使用过。

### 响应

响应作为对请求的回复发送，包含操作的结果或错误。

```typescript
{
  jsonrpc: "2.0";
  id: string | number;
  result?: {
    [key: string]: unknown;
  }
  error?: {
    code: number;
    message: string;
    data?: unknown;
  }
}
```

- 响应**必须**包含与其对应请求相同ID。
- **响应**进一步细分为**成功结果**或
  **错误**。**必须**设置`result`或`error`之一。响应**禁止**
  同时设置两者。
- 结果**可以**遵循任何JSON对象结构，而错误**必须**最少包含
  错误代码和消息。
- 错误代码**必须**是整数。

### 通知

通知从客户端发送到服务器或反之，作为单向消息。
接收者**禁止**发送响应。

```typescript
{
  jsonrpc: "2.0";
  method: string;
  params?: {
    [key: string]: unknown;
  };
}
```

- 通知**禁止**包含ID。

## 认证

MCP为与HTTP一起使用提供了[授权](/specification/2025-06-18/basic/authorization)框架。
使用基于HTTP传输的实现**应该**遵循此规范，
而使用STDIO传输的实现**不应该**遵循此规范，
而应该从环境中检索凭据。

此外，客户端和服务器**可以**协商它们自己的自定义身份验证和
授权策略。

有关MCP身份验证机制发展的进一步讨论和贡献，请加入
我们在
[GitHub Discussions](https://github.com/modelcontextprotocol/specification/discussions)
的讨论，帮助塑造协议的未来！

## 架构

协议的完整规范定义为
[TypeScript架构](https://github.com/modelcontextprotocol/specification/blob/main/schema/2025-06-18/schema.ts)。
这是所有协议消息和结构的权威来源。

还有一个
[JSON架构](https://github.com/modelcontextprotocol/specification/blob/main/schema/2025-06-18/schema.json)，
它是从TypeScript权威来源自动生成的，用于
各种自动化工具。

### 通用字段

#### `_meta`

`_meta`属性/参数由MCP保留，允许客户端和服务器
向其交互附加额外的元数据。

某些键名由MCP保留用于协议级元数据，如下所述；
实现**禁止**对这些键的值做出假设。

此外，[架构](https://github.com/modelcontextprotocol/specification/blob/main/schema/2025-06-18/schema.ts)中的定义
可能会为特定用途的元数据保留特定名称，如这些定义中所声明的。

**键名格式：** 有效的`_meta`键名有两个段：可选的**前缀**和**名称**。

**前缀：**

- 如果指定，**必须**是由点（`.`）分隔的一系列标签，后跟斜杠（`/`）。
  - 标签**必须**以字母开头并以字母或数字结尾；内部字符可以是字母、数字或连字符（`-`）。
- 任何以零个或多个有效标签开头，后跟`modelcontextprotocol`或`mcp`，再后跟任何有效标签的前缀，
  都**保留**供MCP使用。
  - 例如：`modelcontextprotocol.io/`、`mcp.dev/`、`api.modelcontextprotocol.org/`和`tools.mcp.com/`都是保留的。

**名称：**

- 除非为空，**必须**以字母数字字符（`[a-z0-9A-Z]`）开头和结尾。
- **可以**在中间包含连字符（`-`）、下划线（`_`）、点（`.`）和字母数字。
